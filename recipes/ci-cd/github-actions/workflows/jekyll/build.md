---
description: Build a Jekyll site in GH Actions
---
# Build

Here we we don't use any specialized actions and don't handle without persisting or publishing. See the link below for deploy to GH Pages.

Related Cookbook pages:

- [GH Pages Actions][] page in this Jekyll section.
- [Deploy GH Pages][] as a more generic section which could still be used for Jekyll.
- [Jekyll container][] page.

[GH Pages Actions]: {{ site.baseurl }}{% link recipes/ci-cd/github-actions/workflows/jekyll/gh-pages-actions.md %}
[Deploy GH Pages]: {{ site.baseurl }}{% link recipes/ci-cd/github-actions/workflows/deploy-gh-pages/index.md %}
[Jekyll container]: {{ site.baseurl }}{% link recipes/containers/jekyll.md %}


## Sample

### Generic docker

Below is a workflow generated by the GitHub when it suggests a Jekyll workflow for your project. It uses a `docker run` step without using an Action from the marketplace.

An advantage is you do not have to worry about any Ruby or Jekyll setup. The container image is ready to go.

You can pick a tag like `latest` or `4` to get the latest. This makes it easy to use the latest Jekyll on the GH Actions flow. GH Pages normally limits you to `3.9`.

I really hope this action actually takes care of dependencies like project gems. Otherwise you have to run an install command with `gem` or `bundle`, passed to the container. But maybe persisted outside it.

- `main.yml`
    ```yaml
    name: Jekyll site CI

    on:
      push:
        branches:
          - master
      pull_request:
        branches:
          - master

    jobs:
      build:
        runs-on: ubuntu-latest

        steps:
          - uses: actions/checkout@v2

          - name: Build the site in the jekyll/builder container
            run: |
              docker run \
                -v ${{ github.workspace }}:/srv/jekyll \
                -v ${{ github.workspace }}/_site:/srv/jekyll/_site \
                jekyll/builder:latest \
                /bin/bash -c 'chmod 777 /srv/jekyll && jekyll build --future'
    ```

The `--future` flag is to publish futured-dated posts.

### Jekyll Action TS

- [![limjh16 - jekyll-action-ts](https://img.shields.io/static/v1?label=limjh16&message=jekyll-action-ts&color=blue&logo=github)](https://github.com/limjh16/jekyll-action-ts)

This is fork of [Jekyll Actions](https://github.com/marketplace/actions/jekyll-actions) action, except this one doesn't seem to publish for you. The docs recommend a popular action though for this, as below.

This uses TypeScript instead of Docker so is supposed should be quicker to download than the original and handles non-default use-cases.

Sample usage from the docs. Note this includes a publish to GH Pages step.

- `main.yml`
    ```yaml
    name: Build and deploy

    on:
      push:
        branches:
          - master

    jobs:
      jekyll:
        runs-on: ubuntu-latest
        steps:
          - name: ðŸ“‚ Checkout
            uses: actions/checkout@v2

          - name: ðŸ’Ž Setup Ruby
            uses: ruby/setup-ruby@v1
            with:
              ruby-version: 2.7

          - name: ðŸ”¨ Install dependencies and build site
            uses: limjh16/jekyll-action-ts@v2
            with:
              enable_cache: true

          - name: ðŸš€ Deploy
            uses: peaceiris/actions-gh-pages@v3
            with:
              github_token: ${{ secrets.GITHUB_TOKEN }}
              publish_dir: _site
    ```
